#!/bin/tcsh -f
# Wrapper for virtuoso using CADENCE_TOOLVER
# NOTE:  THIS WAS AUTOGENERATED USING makewrappers.py

set BASE=`basename $0`

if ( `hostname` =~ "*-term*" ) then
  echo "***ERROR*** Can not run tool $BASE from terminal server `hostname`"
  echo "Please launch from inside lsf cluster -- for example from inside lsf-wrap xterm"
  exit 1
endif
  
# Try and load CALIBRE unless already loaded
if ( $?CALIBRE_TOOLVER == 0 ) then
  echo "CALIBRE_TOOLVER environment variable is not defined"
  echo "Please define this variable or load a CALIBRE module"
  exit
else
  # See if module loaded with mentor/calibre
  $TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh list |& grep -q mentor/calibre
  if ($? != 0) then
    # Finally load module CALIBRE_TOOLVER
    eval `$TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh load $CALIBRE_TOOLVER`
  endif
endif

# Try and load AFS unless already loaded
if ( $?AFS_TOOLVER == 0 ) then
  echo "AFS_TOOLVER environment variable is not defined"
  echo "Please define this variable or load a AFS module"
  exit
else
  # See if module loaded with mentor/afs
  $TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh list |& grep -q mentor/afs
  if ($? != 0) then
    # Finally load module AFS_TOOLVER
    eval `$TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh load $AFS_TOOLVER`
  endif
endif


# Try and load MMSIM unless already loaded
if ( $?MMSIM_TOOLVER == 0 ) then
  echo "MMSIM_TOOLVER environment variable is not defined"
  echo "Please define this variable or load a MMSIM module"
  exit
else
  # See if module loaded with cadence/spectre
  $TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh list |& grep -q cadence/spectre
  if ($? != 0) then
    # See if module loaded with cadence/mmsim
    $TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh list |& grep -q cadence/mmsim
    if ($? != 0) then
      # Finally load module MMSIM_TOOLVER
      eval `$TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh load $MMSIM_TOOLVER`
    endif
  endif
endif

# Try and load SKILLCAD unless already loaded
if ( $?SKILLCAD_TOOLVER == 0 ) then
  # Older projects may not load skillcad, don't exit here
  echo "SKILLCAD_TOOLVER environment variable is not defined"
  echo "Please define this variable to load a SKILLCAD module"
  exit
else
  # See if module loaded with skillcad/skillcad
  $TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh list |& grep -q skillcad/skillcad
  if ($? != 0) then
    # Finally load module SKILLCAD_TOOLVER
    eval `$TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh load $SKILLCAD_TOOLVER`
  endif
endif

# Try and load INSIGHT unless already loaded
if ( $?INSIGHT_TOOLVER == 0 ) then
  echo "INSIGHT_TOOLVER environment variable is not defined"
  echo "Please define this variable to load an INSIGHT module"
  exit
else
  # See if module loaded with insight/erc
  $TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh list |& grep -q insight/erc
  if ($? != 0) then
    # Finally load module INSIGHT_TOOLVER
    eval `$TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh load $INSIGHT_TOOLVER`
  endif
endif

# Try and load EMX unless already loaded
if ( $?EMX_TOOLVER == 0 ) then
  echo "EMX_TOOLVER environment variable is not defined"
  echo "Please define this variable to load an INSIGHT module"
else
  # See if module loaded with integrand/emx
  $TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh list |& grep -q integrand/emx
  if ($? != 0) then
    # Finally load module EMX_TOOLVER
    eval `$TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh load $EMX_TOOLVER`
  endif
endif

# PRELOAD MODULE SECTION
### This silliness has to be done so that if CDS_SITE is defined, 
### it takes priority over the one defined in the virtuoso module 
if ( $?CDS_SITE != 0) then 
   set myCDS_SITE=$CDS_SITE 
endif


# NOW LOAD THE MODULE
if ( $?CADENCE_TOOLVER == 0 ) then
  echo "CADENCE_TOOLVER environment variable is not defined"
  echo "Please define this variable or load a CADENCE module"
  exit
else
  # module load $CADENCE_TOOLVER
  eval `$TCLSH /user/cad/modules/3.1.6/modulecmd.tcl tcsh load $CADENCE_TOOLVER`
  if ( "$argv" == "-which" )